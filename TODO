- Add headings so we know which scene or model we are at
- broser tts starts playing even before kokoro has finished generating. we need to remove browser tts fallback. it is a very bad voice. just put failed or something like that if kokoro is not working
- i get this error sometimes where only the browser tts plays and not the kokoro tts:Processing chunk: i really really really want to fuck someone right now. Krishna, you just
  make me so horny. oh you sweet sweet boy" mm could you please bend
  mommy over and take her pussy from behind. oh, don't cry, I love you
  krishna. Now be a sweet boy and give gem a kiss
  TTSButtonHandler.js:115 TTS timeout reached, falling back to browser TTS
  TTSButtonHandler.js:136 Using browser TTS fallback with animation
  TTSButtonHandler.js:167 Browser TTS started
  ID3D12Device::GetDeviceRemovedReason failed with DXGI_ERROR_DEVICE_HUNG (0x887A0006)
- While calling [Device].CreateBuffer([BufferDescriptor]).
- While handling unexpected error type Internal when allowed errors are (Validation|DeviceLost|OutOfMemory).
  at CheckHRESULTImpl (..\..\third_party\dawn\src\dawn\native\d3d\D3DError.cpp:119)

Backend messages:

- Device removed reason: DXGI_ERROR_DEVICE_HUNG (0x887A0006)

tts-worker.js?worker_file&type=module:1 Uncaught (in promise) AbortError: Failed to execute 'mapAsync' on 'GPUBuffer': [Device] is lost.
(index):1 ID3D12Device::GetDeviceRemovedReason failed with DXGI_ERROR_DEVICE_HUNG (0x887A0006)

- While calling [Device].CreateBuffer([BufferDescriptor]).
- While handling unexpected error type Internal when allowed errors are (Validation|DeviceLost|OutOfMemory).
  at CheckHRESULTImpl (..\..\third_party\dawn\src\dawn\native\d3d\D3DError.cpp:119)

Backend messages:

- Device removed reason: DXGI_ERROR_DEVICE_HUNG (0x887A0006)

TTSButtonHandler.js:177 Browser TTS ended

- add to docs that i can change default kokoro voice from this.worker.postMessage({
  type: "generate",
  text: text,
  voice: "af_nicole", // Default voice
  });
  in ttsbuttonhandler.js

- all the console errors i get:Browser TTS started
  ID3D12Device::GetDeviceRemovedReason failed with DXGI_ERROR_DEVICE_HUNG (0x887A0006)
- While calling [Device].CreateBuffer([BufferDescriptor]).
- While handling unexpected error type Internal when allowed errors are (Validation|DeviceLost|OutOfMemory).
  at CheckHRESULTImpl (..\..\third_party\dawn\src\dawn\native\d3d\D3DError.cpp:119)

Backend messages:

- Device removed reason: DXGI_ERROR_DEVICE_HUNG (0x887A0006)

tts-worker.js?worker_file&type=module:1 Uncaught (in promise) AbortError: Failed to execute 'mapAsync' on 'GPUBuffer': [Device] is lost.
(index):1 ID3D12Device::GetDeviceRemovedReason failed with DXGI_ERROR_DEVICE_HUNG (0x887A0006)

- While calling [Device].CreateBuffer([BufferDescriptor]).
- While handling unexpected error type Internal when allowed errors are (Validation|DeviceLost|OutOfMemory).
  at CheckHRESULTImpl (..\..\third_party\dawn\src\dawn\native\d3d\D3DError.cpp:119)

Backend messages:

- Device removed reason: DXGI_ERROR_DEVICE_HUNG (0x887A0006)

TTSButtonHandler.js:177 Browser TTS ended
tts-worker.js:69 Processing chunk: i really really really want to fuck someone right now. Krishna, you just
transformers.min.js:1 An error occurred during model execution: "Error: Session already started".
L @ transformers.min.js:1
await in L
R @ transformers.min.js:1
forward @ transformers.min.js:1
\_call @ transformers.min.js:1
e @ transformers.min.js:1
generate @ kokoro.js:87
await in generate
(anonymous) @ tts-worker.js:84
transformers.min.js:1 Inputs given to model: {input_ids: {…}, style: {…}, speed: {…}}
L @ transformers.min.js:1
await in L
R @ transformers.min.js:1
forward @ transformers.min.js:1
\_call @ transformers.min.js:1
e @ transformers.min.js:1
generate @ kokoro.js:87
await in generate
(anonymous) @ tts-worker.js:84
ort-wasm-simd-threaded.jsep.mjs:12 Uncaught (in promise) Error: Session already started
at Object.\_OrtRun (ort-wasm-simd-threaded.jsep.mjs:12:165)
at Su (transformers.min.js:1:439379)
at Ku (transformers.min.js:1:444221)
at Yu.run (transformers.min.js:1:446083)
at e.run (transformers.min.js:1:76298)
at L (transformers.min.js:1:500319)
at e.R [as _forward] (transformers.min.js:1:502411)
at e.forward (transformers.min.js:1:509243)
at e.\_call (transformers.min.js:1:509197)
at KokoroTTS.e [as model] (transformers.min.js:1:708013)
(anonymous) @ ort-wasm-simd-threaded.jsep.mjs:12
Su @ transformers.min.js:1
Ku @ transformers.min.js:1
run @ transformers.min.js:1
run @ transformers.min.js:1
L @ transformers.min.js:1
R @ transformers.min.js:1
forward @ transformers.min.js:1
\_call @ transformers.min.js:1
e @ transformers.min.js:1
generate @ kokoro.js:87
await in generate
(anonymous) @ tts-worker.js:84
TTSButtonHandler.js:115 TTS timeout reached, falling back to browser TTS
TTSButtonHandler.js:136 Using browser TTS fallback with animation
TTSButtonHandler.js:167 Browser TTS started
TTSButtonHandler.js:177 Browser TTS ended

terminal errors:(base) PS D:\Workspace\Github-Projects\vtubergame> npm run dev

> live2dtest@0.0.0 dev
> vite

You are using Node.js 20.15.0. Vite requires Node.js version 20.19+ or 22.12+. Please upgrade your Node.js version.

VITE v7.1.3 ready in 300 ms

➜ Local: http://localhost:5173/
➜ Network: use --host to expose
➜ press h + enter to show help
10:12:01 am [vite] (client) Failed to load source map for D:/Workspace/Github-Projects/vtubergame/src/transformers.min.js.
Error: An error occurred while trying to read the map file at transformers.min.js.map
Error: ENOENT: no such file or directory, open 'D:\Workspace\Github-Projects\vtubergame\src\transformers.min.js.map'
at async open (node:internal/fs/promises:639:25)
at async Object.readFile (node:internal/fs/promises:1249:14)
at async extractSourcemapFromFile (file:///D:/Workspace/Github-Projects/vtubergame/node_modules/vite/dist/node/chunks/dep-Bj7gA1-0.js:8133:65)
at async loadAndTransform (file:///D:/Workspace/Github-Projects/vtubergame/node_modules/vite/dist/node/chunks/dep-Bj7gA1-0.js:26278:22)
10:12:01 am [vite] (client) warning:
D:/Workspace/Github-Projects/vtubergame/src/transformers.min.js
1 | ...();return URL.createObjectURL(t)},$e=async e=>(await import(e)).de1  |  ...();return URL.createObjectURL(t)},$e=async e=>(await import(e)).de1 | ...();return URL.createObjectURL(t)},$e=async e=>(await import(e)).deme(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
me(),j(ue)).default,Ce=async()=>{if(!y...
me(),j(ue)).default,Ce=async()=>{if(!y...
me(),j(ue)).default,Ce=async()=>{if(!y...
me(),j(ue)).default,Ce=async()=>{if(!y...
me(),j(ue)).default,Ce=async()=>{if(!y...
me(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
| ^ me(),j(ue)).default,Ce=async()=>{if(!y...
2 | //# sourceMappingURL=transformers.min.js.map
2 | //# sourceMappingURL=transformers.min.js.map
2 | //# sourceMappingURL=transformers.min.js.map
2 | //# sourceMappingURL=transformers.min.js.map
2 | //# sourceMappingURL=transformers.min.js.map
The above dynamic import cannot be analyzed by Vite.
See https://github.com/rollup/plugins/tree/master/packages/dynamic-import-vars#limitations for supported dynamic import formats. If this is intended to be left as-is, you can use the /_ @vite-ignore _/ comment inside the import() call to suppress this warning.

Plugin: vite:import-analysis
File: D:/Workspace/Github-Projects/vtubergame/src/transformers.min.js

10:19:32 am [vite] (client) page reload src/tts-worker.js
10:22:52 am [vite] (client) page reload src/tts-worker.js (x2)

10:24:15 am [vite] (client) page reload src/TTSButtonHandler.js
